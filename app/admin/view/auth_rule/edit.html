{include file="public/css"}
<div class="main-container container-fluid">
    <div class="page-container">
        <div class="page-content">
            <div class="page-body">

                <div class="row">
                    <div class="col-lg-12 col-sm-12 col-xs-12">
                        <div class="widget">
                            <div class="widget-header bordered-bottom bordered-blue">
                                <span class="widget-caption">修改权限</span>
                            </div>
                            <div class="widget-body">
                                <div id="horizontal-form">
                                    <form class="form-horizontal" id="edit_form" action-url="{:url('auth_rule/editPost')}">
                                        <input type="hidden" name="id" value="{$res.id}">
                                        <div class="form-group">
                                            <label for="" class="col-sm-2 control-label no-padding-right">上级权限</label>
                                            <div class="col-sm-6">
                                                <select name="pid" class="form-control">
                                                    <option value="0">顶级栏目</option>
                                                    {volist name="pid" id="authRule"}
                                                    <option value="{$authRule.id}" {if condition="$res.pid eq $authRule.id"}selected="selected"{/if}><?php if($authRule['level']!=0){echo '|';} echo str_repeat('—', $authRule['level']*3)?>{$authRule.title}</option>
                                                    {/volist}
                                                </select>
                                            </div>
                                            <p class="help-block col-sm-4 red">* 必填</p>
                                        </div>

                                        <div class="form-group">
                                            <label for="" class="col-sm-2 control-label no-padding-right">权限名称</label>
                                            <div class="col-sm-6">
                                                <input class="form-control" value="{$res.title}"  placeholder="" required="" name="title" type="text">
                                            </div>
                                            <p class="help-block col-sm-4 red">* 必填</p>
                                        </div>

                                        <div class="form-group">
                                            <label for="" class="col-sm-2 control-label no-padding-right"><b>Controller/Action</b></label>
                                            <div class="col-sm-6">
                                                <input class="form-control" value="{$res.name}"  placeholder="" required="" name="name" type="text">
                                            </div>
                                            <p class="help-block col-sm-4 red">* 必填（控/方）</p>
                                        </div>
                                        <div class="form-group">
                                            <label for="" class="col-sm-2 control-label no-padding-right"><b>职责</b></label>
                                            <div class="col-sm-6">
                                                <div class="radio hide_fun" style="float:left; margin-right:10px;">
                                                    <label>
                                                        <input {if condition="$res['type'] eq 1"}checked="checked"{/if} name="type" value="1"  type="radio">
                                                        <span class="text" >菜单</span>
                                                    </label>
                                                </div>
                                                <div class="radio show_fun" style="float:left; margin-right:10px;">
                                                    <label>
                                                        <input {if condition="$res['type'] eq 2"}checked="checked"{/if} name="type" class="inverted" value="2" type="radio">
                                                        <span class="text"  >功能</span>
                                                    </label>
                                                </div>
                                                <div class="checkbox fun" style="float:left; margin-right:10px;">
                                                    <label>
                                                        <input type="checkbox" name="is_fun" value="1" class="colored-success" {if condition="$res['is_fun'] eq 1"}checked="checked"{/if}>
                                                        <span class="text" data-toggle="tooltip" data-placement="top" title="用来修改、删除、搜索、推荐、发布等">修改或其他操作</span>
                                                    </label>
                                                </div>
                                            </div>
                                            <p class="help-block col-sm-4 red">* 必填</p>
                                        </div>

                                        <div class="form-group">
                                            <label for="" class="col-sm-2 control-label no-padding-right">启用状态</label>
                                            <div class="col-sm-6">
                                                <select name="status">
                                                    <option value="1" {if condition="$res.status eq 1"}selected="selected"{/if}>开启</option>
                                                    <option value="0" {if condition="$res.status eq 0"}selected="selected"{/if}>关闭</option>
                                                </select>
                                            </div>
                                        </div>

                                        {if $res['pid'] == 0}
                                        <div class="form-group">
                                            <label for="" class="col-sm-2 control-label no-padding-right">图标 Style&nbsp;&nbsp;<i class="menu-icon fa {$res.style}"></i></label>
                                            <div class="col-sm-6">
                                                <input class="form-control" value="{$res.style}" required="" name="style" type="text">
                                            </div>

                                            <a  class="help-block col-sm-4" target="_blank" href="{:url('conf/awesome')}">* font-awesome</a>
                                        </div>
                                        {else/}
                                            <input class="form-control" value="0" required="" name="style" type="hidden">
                                        {/if}

                                        <div class="form-group">
                                            <div class="col-sm-offset-2 col-sm-10">
                                                <button type="button" class="btn btn-default" onclick="SaveInfoEdit()">保存信息</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
{include file="public/foot"}
{block name="page_script"}
<script>
    $(".show_fun").on("click",function(){
        $('.fun').show();
        $('input[name=is_fun]').prop('checked','true');
    });

    $(".hide_fun").on("click",function(){
        $('.fun').hide();
        $('input[name=is_fun]').removeAttr('checked');
    });
</script>
{/block}

